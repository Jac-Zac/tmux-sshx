# Tmux SSHX

A fuzzy SSH host selector for Tmux, with preview capabilities, similar to tmux-sessionx but for SSH hosts.

<!-- ![image](showcase.gif) -->

> [!WARNING]
> Much of this is generated by AI it is just a tool I use for myself
> If anybody wants to improve it pls do so

## Prerequisites üõ†Ô∏è

- [tpm](https://github.com/tmux-plugins/tpm)
- [fzf](https://github.com/junegunn/fzf) (version 0.53.0+ recommended for built-in tmux support)
- Optional: [bat](https://github.com/sharkdp/bat) for syntax highlighting in preview

### Installing Prerequisites

#### macOS (with Homebrew)

```bash
brew install tmux fzf bat
# TPM is installed via git clone in the manual section
```

**Note**: `bat` is used for syntax highlighting in the preview pane with SSH config syntax highlighting. If bat is not available, the preview will still work but without colors.

#### Ubuntu/Debian

```bash
sudo apt update
sudo apt install tmux fzf bat
# Install TPM manually (if not available in repos)
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
```

#### Arch Linux

```bash
sudo pacman -S tmux fzf bat
# tmux-plugin-manager is available in AUR if needed
```

#### Manual Installation

- **Tmux**: Download from https://github.com/tmux/tmux/releases
- **TPM**: `git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm`
- **fzf**: Download from https://github.com/junegunn/fzf/releases (get the latest version for tmux support)
- **bat**: Download from https://github.com/sharkdp/bat/releases

## Install üíª

### Option 1: Using TPM (Recommended)

1. Add this to your `.tmux.conf`:
   ```
   set -g @plugin 'jac-zac/tmux-sshx'
   ```
2. Install the plugin: Press `Ctrl-I` (or run `~/.tmux/plugins/tpm/bin/install_plugins`)

## Configure ‚öôÔ∏è

The default binding for this plugin is `<prefix>+S`. You can change it by adding this line with your desired key:

```sh
set -g @sshx-bind '<mykey>'
```

### Additional configuration options:

```sh
# By default, tmux `<prefix>` key needs to pressed before `<mykey>` to launch
# sshx. In case you just want to bind '<mykey>' without the tmux '<prefix>'
# add the following line to turn the prefix off. This option is set to
# on by defaut.
set -g @sshx-prefix off

# Change window dimensions
set -g @sshx-window-height '65%'
set -g @sshx-window-width '70%'

# Layout options: 'default' (bottom) or 'reverse' (top)
set -g @sshx-layout 'default'

# If you want to change the prompt, the space is needed to not overlap the icon
set -g @sshx-prompt "ÓØà "

# If you want to change the pointer
set -g @sshx-pointer "‚ñ∂ "

# The window displays "tmux-sshx" as the border label at the top
# This helps identify the window when multiple are open

# Preview location and screenspace can be adjusted with these
set -g @sshx-preview-location 'right'
set -g @sshx-preview-ratio '55%'

# The preview can also be disabled altogether
set -g @sshx-preview-enabled 'false'

# If you want to pass in your own FZF options. This is passed in before all other
# arguments to FZF to ensure that other options like `@sshx-pointer` and
# `@sshx-window-height/width` still work. See `man fzf` for config options.
set -g @sshx-additional-options "--color pointer:9,spinner:92,marker:46"

# When set to 'on' auto-accept will interactively accept a host
# when there's only one match
set -g @sshx-auto-accept 'off'

# Uses \`fzf --tmux\` instead of the \`fzf-tmux\` script (requires fzf >= 0.53).
# Set to 'on' if you have fzf 0.53+ and want to use built-in tmux support
set -g @sshx-fzf-builtin-tmux 'off'
```

## Working with SSHX üë∑

Launching the plugin opens a fuzzy finder at the bottom of your screen with SSH hosts from `~/.ssh/config`. The preview pane on the right shows the selected host's configuration with syntax highlighting.

**Note**: If the popup appears empty, check that:

- `~/.ssh/config` exists and contains `Host` entries
- Your SSH config has valid host definitions
- The file is readable (run `ls -la ~/.ssh/config`)
- The file has correct permissions (run `chmod 600 ~/.ssh/config` if needed)

- `enter` accept selection and SSH into host
- `esc` abort without connecting
- `ctrl-u` scroll preview up
- `ctrl-d` scroll preview down
- `ctrl-n` select up
- `ctrl-p` select down
- `?` toggles the preview pane

When you select a host:

- If inside tmux: Opens SSH in a new tmux window
- If outside tmux: Runs SSH directly in your terminal

## Troubleshooting üîß

### Empty Popup

If the fuzzy finder appears but is empty:

1. Check if `~/.ssh/config` exists: `ls -la ~/.ssh/config`
2. Verify it contains Host entries: `grep "^Host " ~/.ssh/config`
3. Ensure the file is readable: `cat ~/.ssh/config`
4. Try creating a basic config if none exists:
   ```
   Host example
       HostName example.com
       User youruser
   ```

### Permission Issues

If you get permission errors:

```bash
chmod 600 ~/.ssh/config
```

### Preview Not Working

- Install `bat` for syntax highlighting: `brew install bat` (macOS) or `sudo apt install bat` (Ubuntu)
- Or the preview will still work but without colors

## Thanks ‚ù§Ô∏è

Inspired by [tmux-sessionx](https://github.com/omerxx/tmux-sessionx).
